
var bColor = '#000000';  //background color
var fColor = '#FFFFFF';  //Font color
var imageBase = '../../images/';  //Image Directory
var ranLimit1 = 1;  //Number of images for a right answer
var ranLimit2 = 1;  //Number of images for the first incorrect answer
var ranLimit3 = 1;  //Number of images for the second incorrect answer
//var newwin;  //The variable used to store the pop up


/***********************************************************************
setFieldProp allows the the field produced by fieldUp(msg,pct) to be
formatted once for a page and then left alone format-wise.

The values to pass in are:
 - Background colour (ie, #FFFFFF)
 - Font colour (ie, #000000)
 - Base Directory for Images (ie, ../../images/mult/
 - Number of images for right answers (ie, 2)
 - Number of images for the first wrong answer (ie, 1)
 - Number of images for the second wrong answer (ie, 3)
************************************************************************/

function setFieldProp(bgc,fc,imgbase,imgNumRight,imgNumWrong1,imgNumWrong2)
	{
	bColor = bgc;
	fColor = fc;
	imageBase = imgbase;
	ranLimit1 = imgNumRight;
	ranLimit2 = imgNumWrong1;
	ranLimit3 = imgNumWrong2;
	}

/***********************************************************************
preloadField preloads the images for the field.
The images are defined in setFieldProp
***********************************************************************/
function preloadField()  //This is a modification of MM_preloadImages() //v3.0
  {
  var imageList=new Array();
  var finTracker = 0;
  var finTrackStr = "";
  	for (var k=0; k<(ranLimit1+ranLimit2+ranLimit3+1); k++)
		{
		var imageId = null;
		if (k<ranLimit1)
			{
			imageList[k] = ""+imageBase+"correct"+(k+1)+".gif";
			}
		else if (k<(ranLimit2+ranLimit1))
			{
			imageList[k] = ""+imageBase+"wrong1_"+(k-ranLimit1+1)+".gif";
			}
		else if (k<(ranLimit3+ranLimit2+ranLimit1))
			{
			imageList[k] = ""+imageBase+"wrong2_"+(k-ranLimit1-ranLimit2+1)+".gif";
			}
		else
			{
			imageList[k] = ""+imageBase+"FinishA.gif";
			imageList[k+1] = ""+imageBase+"FinishB.gif";
			imageList[k+2] = ""+imageBase+"FinishC.gif";
			imageList[k+3] = ""+imageBase+"FinishD.gif";
			imageList[k+4] = ""+imageBase+"FinishF.gif";
			}
		}

  var d=document;
  if(d.images)
  	{
	if(!d.MM_p)
		d.MM_p=new Array();
    var i,  j=d.MM_p.length,  a=imageList;
	for(i=0; i<a.length; i++)
    	if (a[i].indexOf("#")!=0)
			{
			d.MM_p[j]=new Image;
			d.MM_p[j++].src=a[i];
			}
	}
  }


/***********************************************************************
fieldUp is called to display a notification of a game event to a student

The values to pass in are:
 - The message to be displayed (which also partially determines the image)
 - The final percent of correct answers (set to -1 if not yet used)
************************************************************************/

function fieldUp(msg,pct)
	{
	var image = "";
	var fin = "";  //Used for determining finish image
	if (pct>=0)
		{
		if (pct>=0.8)
			{fin="A";}
		else if (pct>=0.7)
			{fin="B";}
		else if (pct>=0.6)
			{fin="C";}
		else if (pct>=0.5)
			{fin="D";}
		else
			{fin="F";}
		image = "Finish"+fin+".gif";
		}
	else if (msg.indexOf("ect!")!=-1)
		{
//		message = "Correct!"
		var temp = Math.floor(Math.random()*ranLimit1)+1;
		image = "correct"+temp+".gif";
		}
	else if (msg.indexOf("gain")!=-1)
		{
//		message = "Incorrect. <br> Please try again";
		var temp = Math.floor(Math.random()*ranLimit2)+1;
		image = "wrong1_"+temp+".gif";
		}
	else
		{
//		message = "Incorrect.<br>The correct answer is: " + rightAnswer[0] + rightAnswer[1]+rightAnswer[2] +"!";
		var temp = Math.floor(Math.random()*ranLimit3)+1;
		image = "wrong2_"+temp+".gif";
		}

	//var closerscript="<script language='javascript'>setTimeout('self.close()',3500)</sc"

	document.getElementById("fieldTable").style.visibility="visible";
	document.getElementById("fieldTable").style.backgroundColor=bColor;
	document.getElementById("imageLeft").style.backgroundColor="#FFFFFF";
	document.getElementById("imageLeft").innerHTML="<img src='"+imageBase+image+"' width='100' height='100'>";
	//document.getElementById("imageRight").style.backgroundColor='#FFFFFF';
	//document.getElementById("imageRight").innerHTML="<img src='"+imageBase+image+"' width='100' height='100'>";
	document.getElementById("message").innerHTML="<font color='"+fColor+"'><b>"+msg+"</b>";
	}



/***********************************************************************
clearField() clears and hides the field generated by fieldUp(msg,pct)
************************************************************************/
function clearField()
	{
	document.getElementById("fieldTable").style.visibility="hidden";
	}

